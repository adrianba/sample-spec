language: python
python:
  - "2.7"
sudo: false
branches:
  except:
    - master
  only:
    - gh-pages
before_install:
  - chmod 755 ./.deploy-output.sh
install:
  - git clone --depth=1 --branch=master https://github.com/tabatkins/bikeshed.git ./bikeshed
  - pip install pygments
  - pip install --editable ./bikeshed
  - bikeshed update
script:
  bikeshed spec
after_success:
  - '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && ./.deploy-output.sh'